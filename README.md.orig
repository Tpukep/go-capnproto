Plain Go code generator for [Capnproto](https://capnproto.org) definitions.
Depends on [go-capnproto v1](github.com/glycerine/go-capnproto).

# Annotations

<<<<<<< HEAD
   - Install capnp tool
   
   - Install capnp plugins
   
   ```
   go get github.com/glycerine/bambam
   go get github.com/glycerine/go-capnproto
   go get github.com/tpukep/go-capnproto
   ```

   Copy go.capnp from glycerine/go-capnproto
=======
There are available annotations:
   - For generating json tags. See `jsontag/json.capnp` file.
   - For generating tags for possible validation. See `check.capnp` file.
   - For generating msgpack tags. See `msgptag/msgp.capnp` file.

Examples of use located at `demo/annotations.capnp`.

# HOW TO

1. Install

   - Install capnp tool. [Instructions](https://capnproto.org/install.html)
   - Install capnp plugins
   
   ```sh
   go get github.com/glycerine/go-capnproto
   go get github.com/glycerine/bambam
   go get github.com/tpukep/go-capnproto
   ```

   Copy `go.capnp` from glycerine/go-capnproto to `/usr/local/include`
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f
   
   ```sh
   cp glycerine/go-capnproto/go.capnp /usr/local/include
   ```

2. Write Capn'proto schema

<<<<<<< HEAD
   `model.capnp`:
   ```
=======
   For example `model.capnp`:
   ```capnp
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f
   @0xad8d3cbc6db52a1d;
   
   using Go = import "/go.capnp";
   $Go.package("model");
   
   struct Book {
      title      @0:   Text;
      pageCount  @1:   Int32;
      authors    @2:   List(Text);
      content    @3:   Text;
   }
   ```

<<<<<<< HEAD
3. Generate Go plain code
=======
3. Generate Go plain code.
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f

   ```sh
   capnp compile -opgo model.capnp
   ```

<<<<<<< HEAD
4. Generate translation code
=======
4. Generate translation code.
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f

   ```sh
   bambam -o . -p model model.go
   ```

<<<<<<< HEAD
5. Generate Cap'n proto code

   Modify `schema.capnp`. Replace:
   ```
=======
5. Generate Cap'n proto code.

   Modify `schema.capnp`. Replace:
   ```capnp
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f
   using Go = import "go.capnp";
   ```
   
   With:
<<<<<<< HEAD
   ```
   using Go = import "/go.capnp";
   ```
   
   Generate
=======
   ```capnp
   using Go = import "/go.capnp";
   ```
   
   Run capnp tool.
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f
   
   ```sh
   capnp compile -ogo schema.capnp
   ```
<<<<<<< HEAD

=======
>>>>>>> f61f39d64eae89aa63e484ae57bb78793342691f
